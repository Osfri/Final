<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="mul.camp.a.dao.MemberDao">
	<select id="getMember" resultType="mul.camp.a.dto.MemberDto">
		SELECT ID, NAME 
		FROM MEMBER
	</select>
	<select id="login" parameterType="mul.camp.a.dto.MemberDto" resultType="mul.camp.a.dto.MemberDto">
	    SELECT *
	    FROM MEMBER
	    WHERE ID = #{ id } AND PW = #{ pw }
	</select>
	    <!-- id, name , email , pw , phonenumber , code , auth , alarm , alarmtime , point -->
	<insert id="register" parameterType="mul.camp.a.dto.MemberDto">
	    INSERT INTO MEMBER( ID,NAME,EMAIL,PW,PHONENUMBER,CODE,AUTH,ALARM,ALARMTIME,POINT )
	    VALUES (#{id},#{name},#{email},#{pw},#{phonenumber},#{code},#{auth},#{alarm},#{alarmtime},#{point})
	</insert>
	<select id="emailCheck" parameterType="mul.camp.a.dto.MemberDto" resultType="java.lang.String">
	    SELECT EMAIL
	    FROM MEMBER
	    WHERE EMAIL = #{email}
	</select>
	<select id="idCheck" parameterType="mul.camp.a.dto.MemberDto" resultType="java.lang.String">
	    SELECT ID
	    FROM MEMBER
	    WHERE ID = #{id}
	</select>
	<!-- 
	<update id="delCalendar" parameterType="java.util.ArrayList">
		UPDATE CALENDAR
		SET TIME=''
		WHERE ID=#{id} and WDATE=#{wdate}
	</update>
	-->
	<insert id="upCalendar" parameterType="java.util.List">
		<foreach collection="list" item="item" open="INSERT ALL" separator=" ">
		INSERT INTO CALENDAR (ID, WDATE, ITME)
		VALUES
			(#{item.id}, #{item.wdate}, #{item.time})
		</foreach>
	</insert>
	<!-- <update id="upCalendar" parameterType="mul.camp.a.dto.CalendarDto">
		merge into calendar
		using dual
		on(id=#{id})
		when matched then
		update set time=${time}
		when not matched then
		insert(id, wdate, time)
		values(#{id}, #{wdate}, #{time})
	</update> -->

</mapper>